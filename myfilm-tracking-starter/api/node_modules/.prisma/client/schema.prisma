generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Event {
  id       String   @id @default(uuid())
  ts       DateTime @default(now())
  type     String
  route    String
  referrer String?  @db.VarChar(512)
  utm      Json?
  meta     Json?
  ua       String?  @db.VarChar(512)
  lang     String?  @db.VarChar(16)
  anonId   String?  @db.VarChar(64)
  userHash String?  @db.VarChar(128)
  ipTrunc  String?  @db.VarChar(64)

  @@index([ts, route, type])
}

model UserSettings {
  userId          Int     @id
  kidsProfile     Boolean @default(false)
  kidsMaxAge      Int?
  providerTmdbIds String  @default("")
}
